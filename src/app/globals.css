@import "tailwindcss";

/* Dark theme (default) */
:root {
  --background: #000000;
  --foreground: #ededed;
  --muted: #888888;
  --muted-dim: #444444;
  --border: #333333;
  --accent: #0070f3;
  --accent-light: #3291ff;
  --primary: #50e3c2; /* Bianchi Celeste - use sparingly for most important info */
  --success: #50e3c2;
  --positive: #6b9e8f; /* Muted green for less important positive indicators */
  --warning: #f5a623;
  --error: #e00;
  --card: #111111;
  --card-hover: #1a1a1a;
  --text-body: rgba(255, 255, 255, 0.82);
  --text-secondary: rgba(255, 255, 255, 0.78);
}

/* Light theme */
[data-theme="light"] {
  --background: #ffffff;
  --foreground: #171717;
  --muted: #666666;
  --muted-dim: #999999;
  --border: #e5e5e5;
  --accent: #0070f3;
  --accent-light: #0061d5;
  --primary: #14b8a6;
  --success: #14b8a6;
  --positive: #5a8a80;
  --warning: #d97706;
  --error: #dc2626;
  --card: #fafafa;
  --card-hover: #f5f5f5;
  --text-body: rgba(0, 0, 0, 0.82);
  --text-secondary: rgba(0, 0, 0, 0.78);
}

/* System preference support */
@media (prefers-color-scheme: light) {
  :root:not([data-theme="dark"]) {
    --background: #ffffff;
    --foreground: #171717;
    --muted: #666666;
    --muted-dim: #999999;
    --border: #e5e5e5;
    --accent: #0070f3;
    --accent-light: #0061d5;
    --primary: #14b8a6;
    --success: #14b8a6;
    --positive: #5a8a80;
    --warning: #d97706;
    --error: #dc2626;
    --card: #fafafa;
    --card-hover: #f5f5f5;
    --text-body: rgba(0, 0, 0, 0.82);
    --text-secondary: rgba(0, 0, 0, 0.78);
  }
}

@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    --background: #000000;
    --foreground: #ededed;
    --muted: #888888;
    --muted-dim: #444444;
    --border: #333333;
    --accent: #0070f3;
    --accent-light: #3291ff;
    --primary: #50e3c2;
    --success: #50e3c2;
    --positive: #6b9e8f;
    --warning: #f5a623;
    --error: #e00;
    --card: #111111;
    --card-hover: #1a1a1a;
    --text-body: rgba(255, 255, 255, 0.82);
    --text-secondary: rgba(255, 255, 255, 0.78);
  }
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --color-muted: var(--muted);
  --color-muted-dim: var(--muted-dim);
  --color-border: var(--border);
  --color-accent: var(--accent);
  --color-accent-light: var(--accent-light);
  --color-primary: var(--primary);
  --color-success: var(--success);
  --color-positive: var(--positive);
  --color-warning: var(--warning);
  --color-error: var(--error);
  --color-card: var(--card);
  --color-card-hover: var(--card-hover);
  --color-text-body: var(--text-body);
  --color-text-secondary: var(--text-secondary);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

* {
  box-sizing: border-box;
}

html {
  font-size: 17px;
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans), -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  line-height: 1.6;
  -webkit-font-smoothing: antialiased;
}

/* Prevent scroll when panel is open */
html.panel-open,
html.panel-open body {
  overflow: hidden !important;
}

html.panel-open {
  -moz-osx-font-smoothing: grayscale;
  transition: background 0.2s ease, color 0.2s ease;
}

/* Vercel-style subtle animations */
a {
  color: inherit;
  text-decoration: none;
  transition: color 0.15s ease;
}

a:hover {
  color: var(--foreground);
}

/* Progress bar styles */
.progress-bar {
  height: 6px;
  background: var(--border);
  border-radius: 3px;
  overflow: hidden;
}

.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--accent), var(--accent-light));
  border-radius: 3px;
  transition: width 0.3s ease;
}

/* Card hover effect */
.card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  transition: background 0.15s ease, border-color 0.15s ease;
}

.card:hover {
  background: var(--card-hover);
  border-color: var(--muted);
}

/* Make card links fully clickable */
a.card {
  display: block;
  text-decoration: none;
  color: inherit;
}

/* ================================================================
   Article Design System v2.0

   Spacing scale (rem, base unit 0.25rem at 17px):
     0.25rem (4px)   micro      subtitle→list family bond
     0.5rem  (9px)   tight      heading→content proximity
     0.75rem (13px)  small      heading margin-bottom
     1rem    (17px)  base
     1.25rem (21px)  medium     blockquote indent
     1.5rem  (26px)  indent     list padding, table cell
     2rem    (34px)  group      h4 section gap
     2.5rem  (43px)  section    h3 gap, hr
     4rem    (68px)  page       h1 gap
     7rem    (119px) major      h2 section gap (acts as visual divider)
   Exception: 1.333em for paragraph flow (= 0.75 × line-height 1.778)

   Typography: h1(2rem/800) h2(1.75rem/700) h3(1.375rem/600) h4(1.125rem/600)
   Colors: --foreground (headings) > --text-body (paragraphs) > --text-secondary (lists)
   Proximity: heading top:bottom ratio ≈ 5:1
   ================================================================ */

/* --- Container --- */
.article-content {
  color: var(--foreground);
  line-height: 1.778;
}

/* --- Headings ---
   margin-top hierarchy: h2(7rem) > h1(4rem) > h3(2.5rem) > h4(2rem)
   margin-bottom is small for proximity to owned content */

.article-content h1 {
  color: var(--foreground);
  font-size: 2rem;
  font-weight: 800;
  line-height: 1.2;
  letter-spacing: -0.02em;
  margin-top: 4rem;
  margin-bottom: 0.75rem;
}

.article-content h2 {
  color: var(--foreground);
  font-size: 1.75rem;
  font-weight: 700;
  line-height: 1.25;
  letter-spacing: -0.02em;
  margin-top: 7rem;
  margin-bottom: 0.75rem;
}

.article-content h3 {
  color: var(--foreground);
  font-size: 1.375rem;
  font-weight: 600;
  line-height: 1.3;
  letter-spacing: -0.01em;
  margin-top: 2.5rem;
  margin-bottom: 0.5rem;
}

.article-content h4 {
  color: var(--foreground);
  font-size: 1.125rem;
  font-weight: 600;
  line-height: 1.4;
  letter-spacing: -0.005em;
  margin-top: 2rem;
  margin-bottom: 0.375rem;
}

/* --- First heading: suppress top margin --- */
.article-content > h1:first-child,
.article-content > h2:first-child,
.article-content > h3:first-child,
.article-content > h4:first-child,
.article-content > div > h1:first-child,
.article-content > div > h2:first-child,
.article-content > div > h3:first-child,
.article-content > div > h4:first-child {
  margin-top: 0;
}

/* --- Adjacent heading pairs: tighter coupling ---
   When headings are consecutive, the child heading's margin-top
   is reduced since the parent heading already provides separation. */
.article-content h2 + h3 { margin-top: 0.75rem; }
.article-content h3 + h4,
.article-content h3 + p  { margin-top: 0.5rem; }
.article-content h4 + p  { margin-top: 0.5rem; }

/* --- Body text --- */
.article-content p {
  color: var(--text-body);
  line-height: 1.778;
  margin-top: 0;
  margin-bottom: 1.333em;
}

/* --- Paragraph → List transitions ---
   Paragraphs before lists get reduced margin-bottom.
   Bold-leading subtitles (like **Revenue Model**:) before lists
   get extra-tight "family bond" spacing. */
.article-content p:has(+ ul),
.article-content p:has(+ ol) {
  margin-bottom: 0.5em;
}

.article-content p:has(> strong:first-child):has(+ ul),
.article-content p:has(> strong:first-child):has(+ ol) {
  margin-bottom: 0.25rem;
}

/* --- Strong & emphasis --- */
.article-content strong {
  color: var(--foreground);
  font-weight: 600;
}

.article-content em {
  font-style: italic;
}

/* --- Lists --- */
.article-content ul,
.article-content ol {
  color: var(--text-secondary);
  margin-top: 0;
  margin-bottom: 1.333em;
  padding-left: 1.5rem;
}

.article-content ul { list-style-type: disc; }
.article-content ol { list-style-type: decimal; }

.article-content li {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
  line-height: 1.778;
  padding-left: 0.25rem;
  display: list-item;
}

.article-content li > p {
  margin-bottom: 0.5em;
}

/* --- Blockquote --- */
.article-content blockquote {
  color: var(--muted);
  border-left: 3px solid var(--accent);
  font-style: italic;
  padding-left: 1.25rem;
  margin: 2rem 0;
}

/* --- Horizontal rule --- hidden; h2 7rem gap acts as section divider */
.article-content hr {
  display: none;
}

/* --- Links --- */
.article-content a {
  color: var(--accent);
  text-decoration: underline;
  text-underline-offset: 3px;
  font-weight: 500;
  transition: color 0.15s ease;
}

.article-content a:hover {
  color: var(--accent-light);
}

/* --- Code --- */
.article-content code {
  font-family: var(--font-mono), monospace;
  font-size: 0.875em;
  background: var(--card);
  padding: 0.2em 0.4em;
  border-radius: 4px;
  border: 1px solid var(--border);
}

.article-content pre {
  background: linear-gradient(135deg, rgba(0, 112, 243, 0.05) 0%, rgba(80, 227, 194, 0.05) 100%);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1.25rem;
  overflow-x: auto;
  margin: 2rem 0;
}

.article-content pre code {
  background: none;
  padding: 0;
  border: none;
  font-size: inherit;
}

/* --- Tables --- */
.article-content table {
  width: 100%;
  border-collapse: collapse;
  margin: 1.5rem 0;
}

.article-content th {
  color: var(--foreground);
  font-weight: 600;
  text-align: left;
  padding: 0.75rem;
  border-bottom: 2px solid var(--border);
}

.article-content td {
  color: var(--text-body);
  padding: 0.75rem;
  border-bottom: 1px solid var(--border);
}

/* Badge styles */
.badge {
  display: inline-flex;
  align-items: center;
  padding: 0.25rem 0.625rem;
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: 9999px;
  background: var(--card);
  border: 1px solid var(--border);
}

.badge-accent {
  background: rgba(0, 112, 243, 0.1);
  border-color: rgba(0, 112, 243, 0.3);
  color: var(--accent-light);
}

.badge-success {
  background: rgba(80, 227, 194, 0.1);
  border-color: rgba(80, 227, 194, 0.3);
  color: var(--success);
}

[data-theme="light"] .badge-success {
  background: rgba(20, 184, 166, 0.1);
  border-color: rgba(20, 184, 166, 0.3);
}

.badge-warning {
  background: rgba(245, 166, 35, 0.1);
  border-color: rgba(245, 166, 35, 0.3);
  color: var(--warning);
}

[data-theme="light"] .badge-warning {
  background: rgba(217, 119, 6, 0.1);
  border-color: rgba(217, 119, 6, 0.3);
}

/* Section styles */
.section-title {
  font-size: 0.75rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: var(--muted);
  margin-bottom: 1rem;
}

/* Theme toggle button */
.theme-toggle {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 0.75rem;
  font-size: 0.875rem;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.15s ease, border-color 0.15s ease;
}

.theme-toggle:hover {
  background: var(--card-hover);
  border-color: var(--muted);
}

/* Mobile drawer animations */
@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slideOutRight {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(100%);
  }
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes fadeOut {
  from {
    opacity: 1;
  }
  to {
    opacity: 0;
  }
}

.animate-slideInRight {
  animation: slideInRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-slideOutRight {
  animation: slideOutRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  animation-fill-mode: forwards;
}

.animate-fadeIn {
  animation: fadeIn 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.animate-fadeOut {
  animation: fadeOut 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Toast animation */
@keyframes toastIn {
  from {
    opacity: 0;
    transform: translateY(4px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.animate-toastIn {
  animation: toastIn 0.2s cubic-bezier(0.16, 1, 0.3, 1);
}

/* Hide scrollbar but maintain scroll functionality */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari, Opera */
}

/* Panel view styles - for side panel company detail */

/* Hide desktop sticky nav in panel view */
.panel-view nav.hidden.lg\:block {
  display: none !important;
}

/* Force column layout in panel view (override lg:flex-row) */
.panel-view .flex.flex-col.lg\:flex-row {
  flex-direction: column !important;
  gap: 0 !important;
}

/* Force all flex children to full width in panel view */
.panel-view .flex.flex-col.lg\:flex-row > * {
  width: 100% !important;
  flex-shrink: 0 !important;
}

/* Show mobile chips nav in panel view (override lg:hidden) */
.panel-view .lg\:hidden.sticky {
  display: block !important;
  margin-left: 0 !important;
  margin-right: 0 !important;
}

/* Hide back link in panel view */
.panel-view > div > div:first-child {
  display: none;
}

/* Force max 2-column grid layout in panel view to prevent overflow */
.panel-view .grid {
  /* Mobile: 1 column */
  grid-template-columns: repeat(1, minmax(0, 1fr)) !important;
}

@media (min-width: 640px) {
  .panel-view .grid {
    /* Tablet and up: max 2 columns */
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
  }
}
